#!/bin/env bash

#bat_dir=/sys/class/power_supply/BAT1
#               or 
bat_dir=/sys/class/power_supply/BAT0

read -r cap< "$bat_dir/capacity"
read -r status   < "$bat_dir/status"


function tmux_bat() {
    if [[ "$status" == "Discharging" ]]; then
        printf '%s%% [%s]\n' "$cap" "-"
    elif [[ "$status" == "Full" ]]; then
        printf "+++ \n"
    elif [[ "$status" == "Charging" ]]; then
        printf '%s%% [%s]\n' "$cap" "+"
    else
        printf "??? \n"
    fi
}
if [[ "$1" == "-t" ]]; then
    tmux_bat
else
    printf '%s%% [%s]\n' "$cap" "$status"
fi
